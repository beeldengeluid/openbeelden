<?xml version="1.0" ?>
<builder
    xmlns="http://www.mmbase.org/xmlns/builder"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:xi="http://www.w3.org/2001/XInclude"
    xsi:schemaLocation="http://www.mmbase.org/xmlns/builder
                        http://www.mmbase.org/xmlns/builder.xsd"
    name="mmbaseusers"
    maintainer="www.mmbase.org" version="100" extends="mmbaseusers"
    defaultcontextintypedef="security"
    >
  <fieldlist>
    
    <field name="defaultcontext" readonly="true">
      <datatype base="node" xmlns="http://www.mmbase.org/xmlns/datatypes">
        <getprocessor>
          <class name="org.mmbase.datatypes.processors.OtherField$Getter">
            <param name="field">number</param>
          </class>
        </getprocessor>
      </datatype>
    </field>
    
    <field name="password">
      <gui>
        <guiname xml:lang="nl">Wachtwoord</guiname>
        <guiname xml:lang="eo">Pasvorto</guiname>
        <guiname xml:lang="en">Password</guiname>
      </gui>
      <datatype base="md5password" xmlns="http://www.mmbase.org/xmlns/datatypes" >
        <required value="true" enforce="onvalidate">
          <description xml:lang="nl">Een wachtwoord is verplicht en moet tenminste 6 karakters lang zijn.</description>
          <description xml:lang="en">A password is required and should be at least 6 characters.</description>
        </required>
        <minLength value="6">
          <description xml:lang="nl">Een wachtwoord is verplicht en moet tenminste 6 karakters lang zijn.</description>
          <description xml:lang="en">A password is required and should be at least 6 characters.</description>
        </minLength>
        <maxLength value="32">
          <description xml:lang="nl">Wachtwoord is te lang</description>
          <description xml:lang="en">Password is too long</description>
        </maxLength>
      </datatype>
    </field>

    <field name="firstname">
      <gui>
        <guiname xml:lang="nl">Voornaam</guiname>
        <guiname xml:lang="en">Firstname</guiname>
      </gui>
      <editor>
        <positions>
          <list>2</list>
        </positions>
      </editor>
      <datatype base="eline" xmlns="http://www.mmbase.org/xmlns/datatypes" >
        <required value="false" />
        <maxLength value="1024" />
      </datatype>
    </field>
    
    <field name="suffix">
      <gui>
        <guiname xml:lang="nl">Tussenvoegsel</guiname>
        <guiname xml:lang="en">Suffix</guiname>
      </gui>
      <editor>
        <positions>
          <list>3</list>
        </positions>
      </editor>
      <datatype base="eline" xmlns="http://www.mmbase.org/xmlns/datatypes" >
        <required value="false" />
        <maxLength value="1024" />
      </datatype>
    </field>

    <field name="lastname">
      <gui>
        <guiname xml:lang="nl">Achternaam</guiname>
        <guiname xml:lang="en">Lastname</guiname>
      </gui>
      <editor>
        <positions>
          <list>4</list>
        </positions>
      </editor>
      <datatype base="eline" xmlns="http://www.mmbase.org/xmlns/datatypes" >
        <required value="false" />
        <maxLength value="1024" />
      </datatype>
    </field>

    <field name="description">
      <gui>
        <guiname xml:lang="nl">Beschrijving</guiname>
        <guiname xml:lang="en">Description</guiname>
      </gui>
      <datatype base="field" xmlns="http://www.mmbase.org/xmlns/datatypes" >
        <required value="false" />
        <maxLength value="64000" />
      </datatype>
    </field>

    <field name="wantmail">
      <gui>
        <guiname xml:lang="nl">Wil mail ontvangen</guiname>
        <guiname xml:lang="en">Wants to receive mail</guiname>
      </gui>
      <datatype base="yesno" xmlns="http://www.mmbase.org/xmlns/datatypes" >
        <default value="true" />
        <required value="true" />
      </datatype>
    </field>

    <field name="contactform">
      <gui>
        <guiname xml:lang="nl">Wil contactformulier</guiname>
        <guiname xml:lang="en">Wants contact-form</guiname>
      </gui>
      <editor>
        <positions>
          <input>-1</input>
          <list>-1</list>
          <search>-1</search>
        </positions>
      </editor>
      <datatype base="boolean" xmlns="http://www.mmbase.org/xmlns/datatypes">
        <default value="" />
        <required value="false" />
      </datatype>
    </field>

    <field name="email">
      <gui>
        <guiname xml:lang="nl">E-mail</guiname>
        <guiname xml:lang="en">Email</guiname>
      </gui>
      <datatype base="internetaddress" xmlns="http://www.mmbase.org/xmlns/datatypes" >
        <unique value="true" />
        <required value="false" />
        <maxLength value="300" />
      </datatype>
    </field>

    <field name="verify_email" state="system">
      <gui>
        <guiname xml:lang="nl">Controleveld e-mail</guiname>
        <guiname xml:lang="en">Verify email</guiname>
      </gui>
      <datatype base="eline" xmlns="http://www.mmbase.org/xmlns/datatypes">
        <maxLength value="1024" />
        <setprocessor>
          <class name="org.mmbase.datatypes.VerifyEmailProcessor" />
        </setprocessor>
        <commitprocessor>
          <class name="org.mmbase.datatypes.VerifyEmailProcessor">
            <param name="textBundle" value="eu.openimages.verifyemailtemplate" />
            <param name="url"        value="/usersoip/thanks.jspx" />
            <!--
            <param name="includeUrl" value="/usersoip/verifyMail.jspx" />
            -->
          </class>
        </commitprocessor>
      </datatype>
    </field>

  </fieldlist>

  <xi:include href="http://www.mmbase.org/builders/cloudcontext/mmbasecontexts.functions.xml" />

</builder>
